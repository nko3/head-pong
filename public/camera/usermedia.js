// Generated by CoffeeScript 1.4.0
(function() {
  var URL, fallback, getUserMedia, got_camera, hasGetUserMedia, not_supported, show_msg;

  URL = window.URL || window.webkitURL;

  getUserMedia = function(options, success, error) {
    getUserMedia = navigator.getUserMedia || navigator.mozGetUserMedia || navigator.webkitGetUserMedia || function(options, success, error) {
      return error();
    };
    return getUserMedia.call(navigator, options, success, error);
  };

  hasGetUserMedia = function() {
    return navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia;
  };

  if (hasGetUserMedia) {
    getUserMedia({
      video: true
    }, function(x) {
      return got_camera(x);
    }, function(e) {
      return fallback(e);
    });
  } else {
    not_supported;

  }

  got_camera = function(stream) {
    return $("#camvideo").attr("src", window.URL.createObjectURL(stream));
  };

  fallback = function(e) {
    alert("err: " + e);
    return show_msg("Not able to connect with your camera device, did you authorized us?");
  };

  not_supported = function() {
    return show_msg("We're using cool stuff, so you need to move to a decent browser, like chrome.");
  };

  show_msg = function(message) {
    return $("#message").html(message);
  };

}).call(this);
